<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<!-- <link rel="stylesheet" type="text/css" href="css/test1.css" /> -->
<!-- 		<link rel="stylesheet" type="text/css" href="gs/css/bootstrap.css"/> -->
<!-- 		<link rel="stylesheet" type="text/css" href="gs/css/style.css"/> -->
<link rel="stylesheet" type="text/css" href="css/test2.css" />

<title>Java Academy Forum</title>
<style>
#abc {
	width: 100%;
	height: 100%;
	opacity: .95;
	/* top:0; */
	/* left:0; */
	display: none;
	position: bottom;
	/* background-color:#313131; */
	overflow: auto
}

img#close {
	position: absolute;
	right: -14px;
	top: -14px;
	cursor: pointer
}
</style>

<script language="javascript" type="text/javascript">
	function limitText(limitField, limitCount, limitNum) {
		if (limitField.value.length > limitNum) {
			limitField.value = limitField.value.substring(0, limitNum);
		} else {
			limitCount.value = limitNum - limitField.value.length;
		}
	}
</script>
</head>

<body
	class="section-viewtopic ltr  postAuthorAlign-left layout-stretched roundAvatars-enabled nb-h">
	<div class="header-wrapper">
		<header id="wp-header">
			<div class="section-boxed section-header">
				<a href="/"> <img src="images/tsys.png" alt="Logo" class="logo" />
				</a> <a href="/" style="padding-left: 80px">Home</a> <a href="#news">News</a>
				<a href="#contact">Contact</a> <span
					th:if='${not @userController.logged}'>
					<form action="/login" method="post" class="navright">

						<input type="text" name="login" placeholder="Login" /> <input
							type="password" name="password" placeholder="Password" /> <input
							type="submit" value="Login"
							class="linkButton linkButton a linkButton a:hover" /> <a
							class="active" href="/register" id="myBtn" style="float: right">Or
							Register</a>
					</form>
				</span> <span th:if='${@userController.logged}'> <a href="/logout"
					style="float: right">
						<p class="logged"
							th:text="'Logged as:' + ' ' + ${@userController.LoggedPlayer?.Login}" />
				</a>
				</span>
				<div id="logo-container" class="topmenu"></div>
				<nav class="navigation-container">
					<div id="menu" class="nav-menu"></div>
				</nav>
			</div>
		</header>
	</div>

	<div id="page-body">
		<div class="container">
			<div class="big-grid">

				<div class="col-maincontent">
					<!-- 					<div class="action-bar bottom"> -->
					<!-- 						<div class="buttons"> -->
					<!-- 							<a class="btn btn-success btn-createnew" href="#comment1">+ -->
					<!-- 								Post reply</a> -->
					<!-- 						</div> -->
					<!-- 					</div> -->

					<div class="page-header">
						<!-- 						<div class="page-header-inner"> -->
						<h2 class="page-title" th:text='${getTopicById}' />
						<!-- 						</div> -->
					</div>
					<div class="postlist" th:each='comments:${getComments}'>
						<div
							th:class="${#strings.contains(comments.value, @commentService.getTopCommentValue(topicId)) and comments.value &gt;3} ? 'toppost has-profile' : 'post has-profile'">
							<div class="inner">
								<dl class="postprofile">
									<dt class="avatar-container">
										<div class="avatar">
											<img width="100" height="100"
												th:src="*{@forumController.decodeToImage(comments.userName)}"
												onerror="this.src='images/default.jpeg';" />
										</div>

									</dt>
									<dt class="profile-main no-profile-rank "
										th:text='${comments.userName}' />
								</dl>
								<div class="postbody">
									<ol class="post-buttons">
										<button id="popup" onclick="div_show()" type="hidden"
											th:value='${comments.ident}' name="replyto">Reply</button>
									</ol>
									<p class="author">
										<span class="timestamp"
											th:text="${#dates.format(comments.createdOn, ' HH:mm  dd-MMM-yyyy ')}" />


									</p>
									<blockquote>
										<span th:if='${comments.replyto &gt; 0}'><cite><span
												th:text="${@commentService.getComment(comments.replyto).userName}"></span>
												said:</cite> <i> <span class="blockquote__inner"
												th:text="${@commentService.getComment(comments.replyto).content}"></span>

										</i><br /> <br /></span>
									</blockquote>
									<div class="content" th:text='${comments.content}'></div>

									<div class="signature">
										<span th:if='${not @userController.logged}'>Only
											registered user can rate this post</span> <span
											th:if='${@userController.logged}'>


											<form action='/favoritePlus' method='post'>
												<div
													th:if='${@favoriteService.getFavorite(@userController.loggedPlayer.login, comments.ident).value &lt;=0}'>
													<input type='hidden' th:value='${comments.ident}'
														name='ident' /> <input type="hidden"
														th:value='${@forumController.topicId}' name="topicId" />
													<input type='image' id="text1" value='PLUS'
														src="images/like.png" class="input-click" />
												</div>
												<div
													th:if='${@favoriteService.getFavorite(@userController.loggedPlayer.login, comments.ident).value &lt;0}'>
													<img src="images/dislikered.png" />
												</div>
											</form>

											<form action='/favoriteMinus' method='post'>
												<div
													th:if='${@favoriteService.getFavorite(@userController.loggedPlayer.login, comments.ident).value &gt;0}'>
													<img src="images/likegreen.png" />
												</div>
												<div
													th:if='${@favoriteService.getFavorite(@userController.loggedPlayer.login, comments.ident).value &gt;=0}'>
													<input type='hidden' th:value='${comments.ident}'
														name='ident' /> <input type="hidden"
														th:value='${@forumController.topicId}' name="topicId" />
													<input class="input-click1" type='image' value='MINUS'
														src="images/dislike.png" />
												</div>
											</form>
										</span>
										<!-- 										<img  -->
										<!-- 											th:if='${@commentService.getTopCommentValue(topicId) == comments.value and @commentService.getTopCommentValue(topicId) > 3}' -->
										<!-- 											src="images/top.png" /> -->
									</div>
								</div>
							</div>
						</div>

						<!-- 						<span th:if='${not @userController.logged}'></span> <span -->
						<!-- 							th:if='${@userController.logged}'> -->
						<div id="abc">
							<div id="popupContact">
								<form class="quicklogin-form" action='/add_reply' method='post'
									id="form" name="form">
									<textarea required="required" id="comment1"
										class="quicklogin__username-input form-control" type="text"
										name="content" placeholder="Enter reply" />
									<input type="hidden" th:value='${@forumController.topicId}'
										name="topicId" /><input type="hidden"
										th:value='${comments.ident}' name="replyto" /> <br /> <input
										class="btn btn-success btn-createnew" type='submit'
										value='Save Reply' />
								</form>
							</div>
						</div>
						<!-- 						</span> -->
					</div>
				</div>
			</div>
			<!-- 			<div class="action-bar bottom"> -->
			<!-- 				<div class="buttons"> -->
			<!-- 					<a class="btn btn-success btn-createnew">+ Post reply</a> -->
			<!-- 				</div> -->
			<!-- 			</div> -->

			<span th:if='${not @userController.logged}'>Log in to add
				comment!</span> <span th:if='${@userController.logged}'>
				<form class="quicklogin-form" action='/add_comment' method='post'>
					<textarea required="required" id="textarea1"
						class="quicklogin__username-input form-control" type="text"
						name="content" placeholder="Enter comment"
						onKeyDown="limitText(this.form.content,this.form.countdown,255);"
						onKeyUp="limitText(this.form.content,this.form.countdown,255);" />
					<font size="2">(Maximum characters: 255) <br/> <input
						readonly='readonly' type="text" name="countdown" size="3"
						value="255" class="countdown" /> characters left.
					</font> <input type="hidden" th:value='${@forumController.topicId}'
						name="topicId" /> <br /> <input
						class="btn btn-success btn-createnew" type='submit'
						value='Save Comment' />


				</form>
			</span>
		</div>
	</div>
	<script src="js/reply.js" />
</body>
</html>